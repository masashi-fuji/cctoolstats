---
priority: 1
tags: ["core", "file-handling"]
description: "ログファイル検索機能の実装 - Claude Codeログファイルの検索とパス変換機能"
created_at: "2025-08-08T14:10:04Z"
started_at: 2025-08-08T14:19:13Z # Do not modify manually
closed_at: 2025-08-08T14:32:34Z # Do not modify manually
---

# ログファイル検索機能の実装

Claude Codeのログファイル検索機能を実装します。新旧両方のパス対応、プロジェクトパス変換、jsonl拡張子対応を行います。

**TDD手法の使用**: Kent Beck流のTDD手法（Red → Green → Refactor）を使用して実装すること。テストファーストで開発を進める。

**lsmcp活用**: lsmcp（TypeScript Language Server）を積極的に活用すること。型エラーの検出、インポート文の整理、リファクタリング支援に活用。

## Tasks

- [x] src/utils/file-finder.tsの修正（.log → .jsonl拡張子変更）
- [x] src/cli.tsのfindDefaultLogFiles関数の実装
- [x] ~/.claude/projects/と~/.config/claude/projects/の両パス対応
- [x] 現在のプロジェクトパスをClaude形式のディレクトリ名に変換する機能
- [x] ファイル存在チェック機能の実装
- [x] パス生成ロジックのユニットテスト作成
- [x] Run tests before closing and pass all tests (No exceptions)
- [x] Get developer approval before closing

## Notes

### 技術要件
- 新パス: `~/.config/claude/projects/*.jsonl` (v1.0.30以降)
- 旧パス: `~/.claude/projects/*.jsonl` (v1.0.29以前)
- プロジェクトパス変換: `/path/to/project` → `path-to-project.jsonl`
- エラーハンドリング: ファイル未発見時の適切なエラーメッセージ

### 実装順序
1. テスト作成（Red フェーズ）
2. 最小限の実装（Green フェーズ）  
3. リファクタリング（Refactor フェーズ）

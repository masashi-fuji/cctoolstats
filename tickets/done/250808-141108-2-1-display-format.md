---
priority: 2
tags: ["ui", "formatting"]
description: "表示フォーマットの改善 - テーブル表示と統計情報の見やすさ向上"
created_at: "2025-08-08T14:11:08Z"
started_at: 2025-08-09T02:25:12Z # Do not modify manually
closed_at: 2025-08-09T02:51:16Z # Do not modify manually
---

# 表示フォーマットの改善

ツール統計とサブエージェント統計の表示フォーマットを改善し、見やすく情報を提供できるようにします。

**TDD手法の使用**: Kent Beck流のTDD手法（Red → Green → Refactor）を使用して実装すること。テストファーストで開発を進める。

**lsmcp活用**: lsmcp（TypeScript Language Server）を積極的に活用すること。型エラーの検出、インポート文の整理、リファクタリング支援に活用。

## Tasks

- [x] テーブル表示の整形改善
- [x] ツール統計の表示フォーマット最適化
- [x] サブエージェント統計の表示フォーマット最適化
- [x] パーセンテージと使用回数の両方表示
- [x] 合計値の表示機能
- [x] カラーコードやスタイリングの適用
- [x] src/formatters/table.tsの改善
- [x] フォーマッターのユニットテスト更新
- [x] Run tests before closing and pass all tests (No exceptions)
- [ ] Get developer approval before closing

## Notes

### 表示改善項目
- **テーブルアライメント**: 数値は右寄せ、テキストは左寄せ
- **パーセンテージ表示**: `45.2% (123 回)` 形式
- **合計情報**: テーブル下部に総使用回数を表示
- **カラー対応**: 統計情報の視認性向上
- **ソート機能**: 使用回数順にソート表示

### テーブルレイアウト例
```
ツール統計
│ ツール名     │ 使用回数 │ 割合     │
├──────────┼──────────┼──────────┤
│ Bash       │      245 │ 45.2%    │
│ Read       │      123 │ 22.7%    │
│ Edit       │       89 │ 16.4%    │
└──────────┴──────────┴──────────┘
合計: 542 回
```

### 技術要件
- CLIテーブルライブラリの活用検討
- 端末幅に応じたレスポンシブ表示
- ユニコード文字対応で2バイト文字の正しい数え方
- 数値フォーマット（3桁区切りなど）

### 実装順序
1. フォーマットのテストケース作成（Red フェーズ）
2. 基本的な表示改善の実装（Green フェーズ）
3. カラーやスタイリングの追加（Refactor フェーズ）
